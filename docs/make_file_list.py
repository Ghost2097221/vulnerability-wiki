# -*- coding: utf-8 -*-
# @Time : 2024/7/25 17:44
# @Author : ordar
# @Project : vulnerability-wiki
# @File : make_file_list.py
# @Python: 3.7.5
import os
import json


FILE_LIST = []
JSON_FILE = "vulnerability-wiki.json"


def generate_file_list():
    for root, dirs, files in os.walk("."):
        # print(root, dirs, files)
        for file in files:
            file_path = os.path.join(root, file)
            lower_file_path = file_path.lower()
            # 过滤一些非重要内容
            if lower_file_path.endswith("readme.md") or lower_file_path.endswith(".py")                     or lower_file_path.endswith(".nojekyll") or lower_file_path.endswith(".gitignore")                     or lower_file_path.endswith(".txt") or lower_file_path.endswith(".json")                    or lower_file_path.endswith(".yml") or lower_file_path.endswith(".db")                    or lower_file_path.endswith(".css") or lower_file_path.endswith(".js")                    or lower_file_path.endswith(".png") or lower_file_path.endswith(".jpeg")                    or lower_file_path.endswith(".jpg") or lower_file_path.endswith(".gif"):
                pass
            else:
                FILE_LIST.append(file_path[1:])


def make_json_file():
    with open(JSON_FILE, "w", encoding="utf8") as f:
        f.write(json.dumps(FILE_LIST, indent=2))


if __name__ == '__main__':
    generate_file_list()
    make_json_file()
